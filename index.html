<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Minesweeper</title>
</head>

<body>
	<table>
		{% for row in board %}
			<tr>
				{% for cell in row %}
					<td class="cell">{{ cell }}</td>
				{% endfor %}
			</tr>
		{% endfor %}
	</table>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			const table = document.getElementById('minesweeper');
			const cells = document.querySelectorAll('.cell');

			cells.forEach(function (cell) {
				cell.addEventListener('click', function () {
					const x = cell.cellIndex;
					const y = cell.parentNode.rowIndex;

					// AJAX request to the Flask backend
					fetch('/click', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json',
						},
						body: JSON.stringify({ 'x': x, 'y': y }),
					})
					.then(response => response.json())
					.then(data => {
						if (data.status === 'game_over') {
							alert('Game Over! You clicked on a mine.');
						} else {
							cell.innerText = data.count;
						}
					})
					.catch(error => console.error('Error:', error));
				});
			});
		});
	</script>
</body>
</html>
